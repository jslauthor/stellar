{"version":3,"sources":["webpack:///./src/js/utils/InterpreterUtil.js?c5a8"],"names":[],"mappings":"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","sourcesContent":["\"use strict\"\n\nvar cheerio = require('cheerio')\n\nclass InterpreterUtil {\n\n    interpretGoodreads(body, review) {\n        var $ = cheerio.load(body)\n\n        var reviewData = $('#bookMeta').text()\n        var title = $('#bookMeta').find(\".fn\").first().text()\n\n        review.numReviews = this._getNumberOfGoodreadsReviews($('#bookMeta').find('.value-title').first().text())\n        review.stars = this._getGoodreadsReviewAverage(reviewData)\n        review.hasTitle = title != \"\"\n        review.title = title != \"\" ? title : review.title != \"\" ? review.title : \"Title unknown\"\n\n        return review\n    }\n\n    _getNumberOfGoodreadsReviews(data) {\n        var matches = /([,\\d]+) ratings/gi.exec(data)\n        return !matches || matches.length < 1 ? 0 : matches[1]\n    }\n\n    _getGoodreadsReviewAverage(data) {\n        var matches = /([.\\d]+) of [.\\d]+ stars/gi.exec(data)\n        return !matches || matches.length < 1 ? 0 : matches[1]\n    }\n\n    interpretAmazon(body, review) {\n        var $ = cheerio.load(body)\n        var reviewData\n\n        var rootNode = $('span:contains(\"See all reviews\")');\n        rootNode.each(function (i, el) {\n            if ($(this).text() == \"See all reviews\") {\n                reviewData = $(this).parents(\".crAvgStars\").first().text()\n                return false;\n            }\n        })\n\n        var title = $(\"#btAsinTitle\").text()\n        title = title == \"\" ? $(\"#productTitle\").text() : title\n\n        review.numReviews = this._getNumberOfAmazonReviews(reviewData)\n        review.stars = this._getAmazonReviewAverage(reviewData)\n        review.hasTitle = title != \"\"\n        review.title = title != \"\" ? title : review.title != \"\" ? review.title : \"Title unknown\"\n\n        return review\n    }\n\n    _getNumberOfAmazonReviews(data) {\n        var matches = /([,\\d]+) customer review/gi.exec(data);\n        return !matches || matches.length < 1 ? 0 : matches[1];\n    }\n\n    _getAmazonReviewAverage(data) {\n        var matches = /([.\\d]+) out of [.\\d]+ stars/gi.exec(data);\n        return !matches || matches.length < 1 ? 0 : matches[1];\n    }\n\n}\n\nmodule.exports = new InterpreterUtil();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/utils/InterpreterUtil.js\n **/"],"sourceRoot":"","file":"0.5c78c5917c596152f05c.hot-update.js"}