{"version":3,"sources":["webpack:///./src/js/stores/ReviewStore.js?87ef"],"names":[],"mappings":"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","sourcesContent":["var alt = require('../alt')\nvar ReviewAction = require('../actions/ReviewAction')\nvar LocalStorageUtil = require('../utils/LocalStorageUtil')\nvar _ = require('lodash')\nvar moment = require('moment')\nvar AutoLaunch = require('auto-launch')\n\nclass ReviewStore {\n\n    constructor() {\n        this.bindActions(ReviewAction)\n        this.reviews = {}\n        this.loading = false\n        this.showReviewPopup = false\n        this.isEditing = false\n        this.isMonitoring = true\n        this.lastUpdate = \"\"\n        this.shouldScrollToBottom = true\n        this.hasNewReviews = false\n        this.notificationsEnabled = true\n        this.runOnLogin = false\n\n        this.nwAppLauncher = new AutoLaunch({\n            name: 'stellarApp',\n            isHidden: false\n        });\n\n        this.on('serialize', () => {\n            var state = _.cloneDeep(this.alt.stores.ReviewStore.getState());\n            state.isEditing = false\n            state.loading = false\n            state.showReviewPopup = false\n            delete state.nwAppLauncher\n\n            _.each(state.reviews, function(review){\n                review.loading = false;\n            })\n            return state;\n        });\n    }\n\n    onToggleMonitoring() {\n        this.isMonitoring = !this.isMonitoring\n        LocalStorageUtil.saveAll()\n    }\n\n    onToggleEditing() {\n        this.isEditing = !this.isEditing\n    }\n\n    onToggleNotifications() {\n        this.notificationsEnabled = !this.notificationsEnabled\n        LocalStorageUtil.saveAll()\n    }\n\n    onCheckRunOnLogin(error) {\n        console.log(error)\n        this.nwAppLauncher.isEnabled(function(enabled) {\n            this.runOnLogin = enabled\n        }.bind(this))\n    }\n\n    onToggleRunOnLogin() {\n        console.log(this.runOnLogin)\n        this.runOnLogin = !this.runOnLogin\n        if (this.runOnLogin)\n            this.nwAppLauncher.enable(this.onCheckRunOnLogin.bind(this))\n        else\n            this.nwAppLauncher.disable(this.onCheckRunOnLogin.bind(this))\n    }\n\n    onShowAddReviewPopup() {\n        this.showReviewPopup = true\n    }\n\n    onHideAddReviewPopup() {\n        this.showReviewPopup = false\n    }\n\n    onAllComplete() {\n        this.lastUpdate = \"Updated \" + moment().format(\"ddd, h:mmA\")\n        this.loading = false\n    }\n\n    onRequestReview(review) {\n        this.loading = true\n    }\n\n    onDeleteReview(reviews) {\n        this.reviews = reviews\n        LocalStorageUtil.saveAll()\n    }\n\n    onAddReview(review) {\n        this.isEditing = false;\n        this.reviews[review.id] = review;\n        this.shouldScrollToBottom = true;\n        LocalStorageUtil.saveAll()\n    }\n\n    onReviewComplete(review) {\n        this.reviews[review.id] = review;\n        LocalStorageUtil.saveAll()\n        this._updateHasNew();\n    }\n\n    onMarkAsSeen(reviewID) {\n        var review = this.reviews[reviewID]\n        if (!_.isUndefined(review))\n            review.hasNew = false;\n\n        this._updateHasNew();\n        LocalStorageUtil.saveAll()\n    }\n\n    onResetScrollToBottom() {\n        this.shouldScrollToBottom = false;\n    }\n\n    _updateHasNew() {\n        this.hasNewReviews = false;\n        let self = this\n        _.each(this.reviews, function(review) {\n            if (review.hasNew) {\n                self.hasNewReviews = true\n                return false\n            }\n        })\n    }\n\n}\n\nmodule.exports = alt.createStore(ReviewStore, 'ReviewStore')\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/stores/ReviewStore.js\n **/"],"sourceRoot":"","file":"0.18418e48029a0fe23a97.hot-update.js"}